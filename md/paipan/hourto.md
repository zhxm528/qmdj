#把“指定年月日的某个小时”换算为干支时的通用做法
- 要点：先求出该日的“日干”，再按小时落入的地支时段与“起干规则”推出“时干”。

##步骤一：先求该日的日干
用你已有的“公历→干支日”的算法，得到当天的干支日（或至少日干：甲乙丙丁戊己庚辛壬癸，对应序号 1..10）。
若还没有算法，按我上一条给你的公式先求“当地正午的 JD”，再取日干即可。

##步骤二：确定“小时对应的地支”
把一天分成 12 个两小时段（本法按民用时区；传统以 23:00 为子时起点）：
子：23:00–00:59
丑：01:00–02:59
寅：03:00–04:59
卯：05:00–06:59
辰：07:00–08:59
巳：09:00–10:59
午：11:00–12:59
未：13:00–14:59
申：15:00–16:59
酉：17:00–18:59
戌：19:00–20:59
亥：21:00–22:59
（实务提示：如果要严格遵古，可改用真太阳时或考虑“子初/子正”的细分；多数现代应用用上表足够。）

##步骤三：由“日干”推得“子时起干”，再顺推到目标时
“时干”随时辰按天干顺序依次前进，但子时的起干取决于“日干”，口诀：
甲己日：子时起干为 甲
乙庚日：子时起干为 丙
丙辛日：子时起干为 戊
丁壬日：子时起干为 庚
戊癸日：子时起干为 壬

得到子时的起干后，按“子、丑、寅、…、亥”每过一时，天干往前顺推 1 位（甲→乙→丙→…→癸→甲 循环），即可得目标“干支时”。