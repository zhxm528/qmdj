# 核心功能
- 前端页面：`/app/admin/context/prompt_flow_steps/page.tsx`
- 后台程序：`/app/api/admin/context/prompt_flow_steps/route.ts`
- 数据库表结构：`/md/database/5_context.sql`
- 配置文件： `/lib/config.ts`
## 需要执行的操作
- 列表中“操作”列，点击“编辑”按钮，“固定版本”这列不应该刷新成类似“d10bba98-0ea8-4d02-a4f6-8...”


## 已执行完毕、忽略不执行的操作
- 新增弹窗，在鼠标点击弹窗外的区域不要关闭弹窗，弹窗中需要增加"关闭"的按钮，用来点击关闭弹窗
- 点击"编辑"按钮时，查询相关记录并回显在编辑弹窗中
- 在后台日志中打印查询的 SQL 语句
- 避免编辑弹窗数据回显问题：使用 useEffect 监听 Modal 打开状态，确保在 Modal 完全打开后再设置表单值
- 点击"编辑"按钮时，在日志中详细打印后端返回给前端的完整内容
- 前端页面表格中，调整表格宽度，内容文字尽量不要换行
- 前端页面表格中，表头“操作”一列的宽度需要和表中的内容宽度保持一致
- 表格中，去除“ID”一列
- 增加查询条件“流程”的下拉框查询
- 表格中去除“固定版本”列
- 表格中“版本策略”列，词义转换，pinned：固定版本，latest：最新版本

- 编辑页面中，点击保存后，选择“最新版本”，但是保存时提示：“multiple assignments to same column "fixed_version_id"”，选择“固定版本”时，才需要校验“fixed_version_id”的唯一性；
- “multiple assignments to same column "fixed_version_id"”，需要改为中文提示；
- 表格中增加一列“固定版本”，显示固定版本ID

- 新增和编辑页面中，当“版本策略”选择“固定版本”时，需要显示“固定版本ID”的选项，以便输入具体版本
- 增加查询条件：“模板”，“版本策略”，“固定版本”
- 现在编辑页面中，当版本策略是"固定版本"时，"固定版本"字段还是没有正确回显已保存的版本值，请检查代码。


- 现在系统实现了完整的联动：
 - 查询条件中：
  - 选择“模板”后，自动加载该模板关联的版本列表
  - “固定版本”下拉框只显示与选中模板关联的版本
  - 未选择模板时，“固定版本”下拉框禁用
- 新增和编辑页面中：
 - 选择“模板”后，自动加载该模板关联的版本列表
 - “固定版本”下拉框只显示与选中模板关联的版本
 - 未选择模板时，“固定版本”下拉框禁用

 - "固定版本"字段从“字符串类型”改为查询“prompt_template_versions”表，且满足“prompt_templates”表关联的“prompt_template_versions”
- 新增和编辑页面中，实现“prompt_templates”和“prompt_template_versions”的联动，即“模板”和“固定版本”的联动，每次选择“模板”，只把选中的“模板”关联的“模板版本”查询出来供“固定版本”下拉框中选择

- “固定版本”下拉框时是查询“prompt_template_versions”表中的数据，需要满足 `template_id`等于选中的“模板”
- 编辑页面中，增加一个按钮“编辑模板版本”，点击后以新页签打开选择的“prompt_template_versions”记录的编辑页面；