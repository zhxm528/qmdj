# 抓月令与季节（第一权重）→ 输出：当令之气、旺相休囚大方向
- 只看“月支（月令）”就先定出季节主气（当令之气），再把五行在这个季节里的大体状态（旺/相/休/囚/死）写成一张“方向表”，给后面判旺衰、取用神打底。



## 1) 抓月令：月支 → 季节 → 当令之气

### 1.1 月支对应季节（最常用分段）

* **寅卯辰 = 春（木当令）**
* **巳午未 = 夏（火当令）**
* **申酉戌 = 秋（金当令）**
* **亥子丑 = 冬（水当令）**
* **辰戌丑未**同时还是“**四季月/土月/过渡月**”（土的权重会被抬高，且更强调“转季”）

> 输出1（当令之气）：`command_element`（当令五行）= 春木 / 夏火 / 秋金 / 冬水；若月支是辰戌丑未，再额外输出 `is_transition_month=true`。



## 2) 旺相休囚死：用“季节当令五行”去给五行排队

这张表你可以当作“第一权重的大方向”（后面会被通根、透干、合冲等修正，但基调很稳）。

### 2.1 春（寅卯辰）：木当令

* **旺：木**
* **相：火**（木生火，跟着起势）
* **休：水**（水生木，出力后转“休”）
* **囚：金**（金克木，在春季失势）
* **死：土**（木克土，土更弱；但辰月土会抬头）

### 2.2 夏（巳午未）：火当令

* **旺：火**
* **相：土**（火生土）
* **休：木**（木生火，出力后休）
* **囚：水**（水克火，在夏季弱）
* **死：金**（火克金）

### 2.3 秋（申酉戌）：金当令

* **旺：金**
* **相：水**（金生水）
* **休：土**（土生金，出力后休）
* **囚：火**（火克金，在秋季弱）
* **死：木**（金克木）

### 2.4 冬（亥子丑）：水当令

* **旺：水**
* **相：木**（水生木）
* **休：金**（金生水，出力后休）
* **囚：土**（土克水，在冬季弱但丑月土会抬头）
* **死：火**（水克火）

> 输出2（旺相休囚死方向表）：一个对象/表格，键是五行，值是该季节的状态（旺/相/休/囚/死）。



## 3) 四季月（辰戌丑未）的“加权规则”（很实用）

因为很多误判就出在：只按春夏秋冬，不处理“转季土”。

**建议规则（简单且够用）：**

* 若月支 ∈ {辰、戌、丑、未}：

  * `earth_bias += 1`（土权重上调）
  * 同时保留原本季节基调：

    * 辰：春末（木仍有势，土起）
    * 未：夏末（火余热，土起）
    * 戌：秋末（金余势，土起）
    * 丑：冬末（水余势，土起）

> 输出3（过渡提示）：`season_phase` = “春末/夏末/秋末/冬末”，并标注 “土增强”。



## 4) 建议你最终的“输出结构”（程序/表都好用）

```json
{
  "month_branch": "寅",
  "season": "spring",
  "season_phase": "spring", 
  "command_element": "wood",
  "is_transition_month": false,
  "wx_trend": {
    "wood": "旺",
    "fire": "相",
    "water": "休",
    "metal": "囚",
    "earth": "死"
  },
  "notes": [
    "月令第一权重：先定木旺火相的大方向",
    "后续再用通根/透干/合冲刑害修正强弱与用神"
  ]
}
```



## 5) 你用它怎么“落地”到后续判断（一句话）

* 当令五行（旺）与其所生（相）通常更容易“成气候”；
* 被当令克制的一方（囚/死）默认处于劣势，除非**透干多、通根强、得助多**把它拉起来。

## 核心功能
- 前端页面：`/app/bazi/page.tsx`
- 步骤3程序：`/app/api/bazi/step3.ts`
- 数据库：`/md/database/2_qimen_pan.sql`
- 配置文件： `/lib/config.ts`
- 重写后台程序，按上面规则生成代码抓月令与季节（第一权重）→ 输出：当令之气、旺相休囚大方向。