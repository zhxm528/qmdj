# YearPicker 年份选择器使用说明

## 功能特性

年份选择器 (`YearPicker`) 是一个可翻页的年份选择组件，支持大范围年份选择。

### 核心功能

1. **4x4 网格显示**：每页显示 16 个年份，以 4x4 网格布局展示
2. **翻页导航**：支持上一页/下一页翻页，快速浏览不同年份区间
3. **干支年显示**：每个年份同时显示公历年和对应的干支年
4. **选择反馈**：选中的年份高亮显示（琥珀色背景）
5. **响应式设计**：完美适配桌面端和移动端
6. **点击外部关闭**：点击组件外部自动关闭面板

## 年份范围

- **起始年份**：1950 年
- **结束年份**：3950 年
- **总范围**：2000 年
- **每页显示**：16 年（4x4 网格）

## 使用示例

```tsx
import YearPicker from "@/components/YearPicker";

function MyComponent() {
  const [year, setYear] = useState("");

  return (
    <YearPicker 
      value={year} 
      onChange={setYear} 
      required 
    />
  );
}
```

## API

### Props

| 属性 | 类型 | 必填 | 说明 |
|------|------|------|------|
| value | string | 是 | 选中的年份值（字符串格式） |
| onChange | (year: string) => void | 是 | 年份变化回调 |
| required | boolean | 否 | 是否必填 |

## 界面说明

### 输入框
- 显示选中的年份和对应的干支年
- 格式：`2024年 (甲辰)`
- 未选择时显示占位文字"年"

### 下拉面板
包含以下几个部分：

#### 1. 翻页控制栏
- **上一页按钮**：向前翻页（每页 16 年）
- **年份范围**：显示当前页的年份区间（桌面端显示）
- **下一页按钮**：向后翻页
- 边界状态：到达起始/结束年份时按钮禁用

#### 2. 4x4 年份网格
- **显示格式**：
  - 主文本：公历年（大号）
  - 副文本：干支年（小号）
- **选中状态**：
  - 琥珀色背景（#F59E0B）
  - 白色文字
  - 轻微放大效果（scale-105）
- **悬停效果**：
  - 淡琥珀色背景
  - 轻微放大
- **点击动画**：
  - 按下时缩小（active:scale-95）
  - 释放时恢复正常

#### 3. 底部提示
- 显示年份选择范围
- 提示用户操作方式

## 响应式设计

### 桌面端（≥768px）
- 网格间距：1.5rem
- 年份文字：sm (0.875rem)
- 干支文字：xs (0.75rem)
- 面板最大宽度：400px

### 移动端（<768px）
- 网格间距：0.375rem
- 年份文字：xs (0.75rem)
- 干支文字：10px
- 面板最小宽度：280px
- 年份范围文字隐藏

## 交互流程

### 选择年份

1. **打开面板**：点击输入框
2. **浏览年份**：使用上一页/下一页按钮或直接查看当前页的 16 年
3. **选择年份**：点击目标年份
4. **自动关闭**：选择后面板自动关闭
5. **更新显示**：输入框显示选中的年份和干支

### 键盘支持

- **Tab**：切换焦点
- **Enter/Space**：打开/关闭面板（预留）
- **Esc**：关闭面板（预留）

## 技术实现

### 状态管理

```typescript
const [isOpen, setIsOpen] = useState(false);        // 面板打开状态
const [currentYear, setCurrentYear] = useState();   // 当前焦点年份
const [startYear, setStartYear] = useState();       // 页面起始年份
```

### 翻页逻辑

```typescript
// 上一页
if (startYear >= 1950 + 16) {
  setStartYear(startYear - 16);
}

// 下一页
if (startYear < 3950 - 16) {
  setStartYear(startYear + 16);
}
```

### 年份网格生成

```typescript
const generateYearGrid = () => {
  const years = [];
  for (let i = 0; i < 16; i++) {
    const year = startYear + i;
    if (year >= 1950 && year <= 3950) {
      years.push(year);
    }
  }
  return years;
};
```

## 视觉设计

### 颜色方案

- **选中态**：琥珀色背景（#F59E0B），白色文字
- **悬停态**：淡琥珀色背景（#FFFBEB）
- **默认态**：白色背景，深灰色文字
- **禁用态**：灰色背景（50% 透明度）

### 动画效果

- **过渡动画**：transition-all (所有属性)
- **悬停放大**：hover:scale-105
- **点击缩小**：active:scale-95
- **选中高亮**：scale-105 + shadow-md

## 注意事项

1. **范围限制**：只能选择 1950-3950 年
2. **翻页边界**：到达边界时翻页按钮自动禁用
3. **点击外部**：点击组件外部会自动关闭面板
4. **响应式**：移动端自动调整文字大小和间距
5. **性能**：仅生成当前页的 16 个年份，避免大数据渲染

## 未来优化

- [ ] 添加年份快速跳转（搜索功能）
- [ ] 支持键盘导航（方向键、Page Up/Down）
- [ ] 添加年份标签（如"今年"、"未来"）
- [ ] 支持自定义年份范围
- [ ] 添加动画过渡效果

